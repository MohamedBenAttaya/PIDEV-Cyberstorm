{#{% extends 'base.html.twig' %}
{% block body %}#}
{#<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>#}
{% extends 'homeAdmin.html.twig' %}
{% block titTab %}
    Evenements

{% endblock %}

{% block tab  %}



</br>
    <a href ="{{ path('pdf') }}" class="btn btn-primary" >print</a>
{#<div style="margin-right:50px;" class="btn btn-primary" ><a href="{{
    path('addStudent') }}"> Ajouter Etudiant</a></div>

    </div>#}
<input type="text" id="search" class="form-control"  placeholder="Search">
<div>
    <table border ="1" id="t" class="">
        <thead class="">
        <tr>
            <td >ID</td>
            <td >Nom</td>
            <td >Lieu</td>
            <td >Date</td>
            <td >Description</td>
            <td >Tel</td>
            <td >Email</td>

        </tr>
        </thead>
        <tbody id="all">
        {% for student in evenements %}
            <tr>
                <td>
                    {{ student.id }}
                </td>
                <td>
                    {{ student.nom }}
                </td>
                <td>
                    {{ student.lieu }}
                </td>
                <td>
                    {{ student.date ? student.date|date('Y-m-d') : ''}}
                </td>
                <td>
                    {{ student.description }}
                </td>
                <td>
                    {{ student.tel }}
                </td>
                <td>
                    {{ student.email }}
                </td>

          {#      <td>
                    <a href="{{ path('eventModif', {'id': student.id}) }}"> modifier</a>
                    <a href="{{ path('evenement_delete_adm', {'id': student.id}) }}"> supprimer</a>
                </td>#}
            </tr>
        {% endfor %}
        </tbody>
        <tbody id="search">
        </tbody>
    </table>
</div>
{#{% endblock %}#}
<script
        src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">


</script>
<script>
    $(document).ready(function() {
        $("#search").keyup(function(e){
            /* La variable value va prendre la valeur insérer dans le champ de texte
            afin d’effectuer la recherche */
            var value = $(this).val();
            /* Ajax est lancé lors du remplissage du champ texte dont l’id est
            « search » pour faire la recherche */
            $.ajax({
                /* l’url est une chaine de caractères contenant l’adresse où la requête est
                envoyée */
                url : "{{ path('searchStudentx') }}",
                /* La méthode utilisée pour transférer les données est GET */
                type : 'GET',
                /*Ici search value va prendre la chaine entrée par un utilisateur dans la
                zone de recherche et sera placée après l’url */
                data: {

                    'searchValue' : value
                },
                /*Cette fonction permet de vider le contenu du tableau pour recevoir le
                nouveau contenu*/
                success : function(retour){
                    if(retour){
                        $('#t tbody#search').empty();
                        $.each(JSON.parse(retour), function(i, obj) {
                            $('#t tbody#all').hide();
                      /*      $('#t tbody#search').append('<tr><td> '+obj.id+'
                                </td><td> '+obj.nom+' </td><td>'+obj.lieu+' </td><td><a
                            href="eventModif/'+obj.id+'">modifier</a> </br><a
                            href="deleteStudent/'+obj.id+'">supprimer</a></td></tr>');*/
                            $('#t tbody#search').append('<tr><td>' + obj.id + '</td><td>' + obj.nom + '</td><td>' + obj.lieu + '</td><td>' + obj.date + '</td><td>' + obj.description + '</td><td>' + obj.tel + '</td>' +
                                '<td>' + obj.email + '</td></tr>')
                        });
                    }
                    else
                    {
                        $('#t tbody#all').show();
                        $('#t tbody#search').empty();
                        $('#t tbody#search').fadeIn('fast');
                    }
                },
            });
            return false;
        });
    });
</script>

{#</body>
</html>#}
{% endblock %}
